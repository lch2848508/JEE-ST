<?xml version="1.0" encoding="utf-8"?>
<component:TitleWindowEx close="titlewindowex1_closeHandler(event)" title="保存到模版" xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx"
						 xmlns:component="com.estudio.flex.component.*" width="320" height="140">
	<fx:Script>
		<![CDATA[
			import com.estudio.flex.utils.StringUtils;

			import mx.collections.ArrayCollection;
			import mx.core.FlexGlobals;
			import mx.events.CloseEvent;
			import mx.events.FlexEvent;
			import mx.managers.PopUpManager;
			private static var instance:WinInputLibraryName=null;
			private var callFunction:Function=null;
			[Bindable]
			private var templateType:ArrayCollection=new ArrayCollection([]);

			/////////////////////////////////////////////////////////////////////////////////////////////////
			public static function execute(types:Array, callFunction:Function):void
			{
				if (instance == null)
					instance=new WinInputLibraryName();
				else
				{
					instance.textInput.text="";
					instance.btnOK.enabled=false;
					instance.checkBox.selected=false;
				}

				if (instance.templateType.source != types)
					instance.templateType=new ArrayCollection(types);
				instance.callFunction=callFunction;
				PopUpManager.addPopUp(instance, FlexGlobals.topLevelApplication as DisplayObject, true);
				PopUpManager.centerPopUp(instance);
			}

			/////////////////////////////////////////////////////////////////////////////////////////////////
			protected function titlewindowex1_closeHandler(event:CloseEvent):void
			{
				PopUpManager.removePopUp(this);
			}

			/////////////////////////////////////////////////////////////////////////////////////////////////
			protected function button1_clickHandler(event:MouseEvent):void
			{
				PopUpManager.removePopUp(this);
			}

			/////////////////////////////////////////////////////////////////////////////////////////////////
			protected function button2_clickHandler(event:MouseEvent):void
			{
				PopUpManager.removePopUp(this);
				if (callFunction)
					callFunction(StringUtils.trim(textInput.text), comboboxType.selectedItem, checkBox.selected);
			}

			/////////////////////////////////////////////////////////////////////////////////////////////////

			protected function comboboxType_creationCompleteHandler(event:FlexEvent):void
			{
				comboboxType.textInput.editable=false;
			}
		]]>
	</fx:Script>
	<s:Label text="保存类型:" left="5" top="10"/>
	<s:ComboBox selectedIndex="0" creationComplete="comboboxType_creationCompleteHandler(event)" left="65" right="5" top="5" id="comboboxType" dataProvider="{templateType}"/>

	<s:Label text="保存名称:" left="5" top="40"/>
	<s:TextInput left="65" right="5" top="35" id="textInput"/>

	<s:Line left="2" right="2" bottom="40">
		<s:stroke>
			<s:SolidColorStroke color="#7B889C"/>
		</s:stroke>
	</s:Line>
	<s:CheckBox label="是否共享" left="5" bottom="12" id="checkBox"/>
	<s:Button label="确定" id="btnOK" right="80" height="30" width="70" bottom="5" enabled="{!StringUtils.isEmpty(StringUtils.trim(textInput.text))}" click="button2_clickHandler(event)"/>
	<s:Button label="关闭" id="btnClose" right="5" height="30" width="70" bottom="5" click="button1_clickHandler(event)"/>
</component:TitleWindowEx>
