<?xml version="1.0" encoding="utf-8"?>
<s:TitleWindow width="400" height="150" rollOverColor="#CEDBEF" creationPolicy="all" keyDown="titlewindow1_keyDownHandler(event)" close="titlewindow1_closeHandler(event)" xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx">
	<s:layout>
		<s:VerticalLayout gap="1"/>
	</s:layout>
	<fx:Script>
		<![CDATA[
			import mx.core.FlexGlobals;
			import mx.events.CloseEvent;
			import mx.managers.PopUpManager;

			import spark.utils.TextFlowUtil;

			//全局唯一 节约系统资源
			private static var win:AlertWindow=null;

			//关闭按钮点击
			protected function btnCancel_clickHandler(event:MouseEvent):void
			{
				if (win.isShow)
				{
					FlexGlobals.topLevelApplication.closePopupWindow(win);
					win.isShow=false;
				}

			}

			//关闭窗口回调事件
			protected function titlewindow1_closeHandler(event:CloseEvent):void
			{
				btnCancel_clickHandler(null);
			}

			public static function show(caption:String, content:String, type:int=0):void
			{
				if (win == null)
					win=new AlertWindow();

				win.title=caption;
				win.content=content;
				win.imgsource=type == 2 ? win.PNG_STOP : type == 1 ? win.PNG_WARNING : win.PNG_INFO;
				if (!win.isShow)
				{
					win.isShow=true;
					FlexGlobals.topLevelApplication.showPopupWindow(win, true);
					win.setFocus();
				}
				else
				{
					win.validateNow();
				}
			}

			[Embed(source="assets/common/alert_info.png")]
			private var PNG_INFO:Class;

			[Embed(source="assets/common/alert_warning.png")]
			private var PNG_WARNING:Class;

			[Embed(source="assets/common/alert_stop.png")]
			private var PNG_STOP:Class;

			[Bindable]
			private var content:String="";

			[Bindable]
			private var imgsource:Class=null;
			private var isShow:Boolean=false;

			protected function titlewindow1_keyDownHandler(event:KeyboardEvent):void
			{
				if (event.keyCode == 13 || event.keyCode == 32 || event.keyCode == 27)
					btnCancel_clickHandler(null);
			}
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- 将非可视元素（例如服务、值对象）放在此处 -->
	</fx:Declarations>
	<s:BorderContainer width="100%" height="100%" minHeight="10" borderVisible="false">
		<s:HGroup x="0" y="0" width="100%" height="100%">
			<s:Group x="0" y="0" width="60" height="100%" minHeight="10">
				<s:Image id="image" horizontalCenter="0" verticalCenter="0" source="{imgsource}">
				</s:Image>
			</s:Group>
			<s:Group x="0" y="0" width="100%" height="100%" minHeight="10">
				<s:RichText id="labelContent" width="100%" height="100%" left="0" top="0" paddingRight="10" verticalAlign="middle" text="{content}">
				</s:RichText>
			</s:Group>
		</s:HGroup>
	</s:BorderContainer>
	<s:Line id="line" width="100%" height="0">
		<s:stroke>
			<s:SolidColorStroke color="#CCCCCC"/>
		</s:stroke>
	</s:Line>
	<s:BorderContainer width="100%" height="40" borderVisible="false">
		<s:Button id="btnCancel" width="75" height="30" right="5" top="4" fontWeight="bold" label="关闭" click="btnCancel_clickHandler(event)">
		</s:Button>
	</s:BorderContainer>
</s:TitleWindow>
