<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
	http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
	<display-name>E_STUDIO系统运行环境</display-name>
	<filter>
		<filter-name>EncodingFilter</filter-name>
		<filter-class>com.estudio.web.filter.EncodingFilter</filter-class>
	</filter>
	<filter>
		<filter-name>ClientAuthenFilter</filter-name>
		<filter-class>com.estudio.web.filter.ClientAuthenFilter</filter-class>
	</filter>
	<filter>
		<filter-name>DisabledAccessFilter</filter-name>
		<filter-class>com.estudio.web.filter.DisabledAccessFilter</filter-class>
	</filter>
	<filter>
		<filter-name>DesignAuthenFilter</filter-name>
		<filter-class>com.estudio.web.filter.DesignAuthenFilter</filter-class>
	</filter>

	<filter-mapping>
		<filter-name>ClientAuthenFilter</filter-name>
		<url-pattern>/client/*</url-pattern>
		<url-pattern>/WebGIS/index.jsp</url-pattern>
		<url-pattern>/report/*</url-pattern>
		<url-pattern>/flexclient/utils.jsp</url-pattern>
		<url-pattern>/flexclient/index.jsp</url-pattern>
		<url-pattern>/htmlEditor/news_service.jsp</url-pattern>
		<url-pattern>/htmlEditor/news.jsp</url-pattern>
	</filter-mapping>

	<filter-mapping>
		<filter-name>EncodingFilter</filter-name>
		<url-pattern>/client/*</url-pattern>
		<url-pattern>/ext/*</url-pattern>
		<url-pattern>/studio/*</url-pattern>
		<url-pattern>/utils/*</url-pattern>		
		<url-pattern>/servlet/*</url-pattern>
		<url-pattern>/public/*</url-pattern>
		<url-pattern>/batchupload/*</url-pattern>
		<url-pattern>/WebGIS/*</url-pattern>
	</filter-mapping>

	<filter-mapping>
		<filter-name>DesignAuthenFilter</filter-name>
		<url-pattern>/usermanager/*</url-pattern>
		<url-pattern>/diagram/*</url-pattern>
		<url-pattern>/objectdesigner/*</url-pattern>
		<url-pattern>/portal/*</url-pattern>
	</filter-mapping>

	<listener>
		<description>Http会话统计</description>
		<listener-class>com.estudio.web.listener.EStudioSessionListener</listener-class>
	</listener>
	<servlet>
		<servlet-name>Utils</servlet-name>
		<servlet-class>com.estudio.web.servlet.Utils</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>FirstStartMe</servlet-name>
		<servlet-class>com.estudio.web.servlet.FirstStartMe</servlet-class>
		<load-on-startup>1</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>Login</servlet-name>
		<servlet-class>com.estudio.web.servlet.Login</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>RoleServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.usermanager.RoleServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DepartmentServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.usermanager.DepartmentServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>UserInfoServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.usermanager.UserInfoServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>UserProviderServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.usermanager.UserProviderServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DBDiagram</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.db.DBDiagramServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DBEntryServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.db.DBEntryServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>VerifyImage</servlet-name>
		<servlet-class>com.estudio.web.servlet.VerifyImage</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>ObjectTreeServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.objects.ObjectTreeServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>PortalGroupServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.portal.PortalGroupServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>PortalRightServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.portal.PortalRightServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>PortalItemServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.portal.PortalItemServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>SQLServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.utils.SQLServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>ObjectFormServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.objects.ObjectFormsServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DataServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webclient.DataServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>CodeAssist</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.utils.CodeAssistServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>WebParams</servlet-name>
		<servlet-class>com.estudio.web.servlet.config.WebParams</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>UniqueIDServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webclient.UniqueIDServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>ComboBoxTemplateServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.utils.ComboBoxTemplateServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>ExcelServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webclient.ExcelServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>AttachmentServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webclient.AttachmentServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>ObjectReportServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.objects.ObjectReportServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>ObjectWorkFlowServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.objects.ObjectWorkFlowServlet</servlet-class>
	</servlet>
	<servlet>
		<description>照片服务程序</description>
		<display-name>照片服务程序</display-name>
		<servlet-name>PictureServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webclient.PictureServlet</servlet-class>
	</servlet>
	<servlet>
		<description>获取表单定义</description>
		<servlet-name>FormsDefineServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webclient.FormsDefineServlet</servlet-class>
	</servlet>
	<servlet>
		<description>获取栏目定义</description>
		<servlet-name>GridDefineServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webclient.GridDefineServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>WorkFlowRuntimeServlet</servlet-name>
		<servlet-class>com.estudio.workflow.web.servlet.WorkFlowRuntimeServlet</servlet-class>
	</servlet>
	<!-- 配置监控信息 -->


	<servlet-mapping>
		<servlet-name>Utils</servlet-name>
		<url-pattern>/studio/utils</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>FirstStartMe</servlet-name>
		<url-pattern>/servlet/FirstStartMe</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>Login</servlet-name>
		<url-pattern>/servlet/login</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>VerifyImage</servlet-name>
		<url-pattern>/servlet/verifyimage</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>RoleServlet</servlet-name>
		<url-pattern>/usermanager/role</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DepartmentServlet</servlet-name>
		<url-pattern>/usermanager/department</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>UserInfoServlet</servlet-name>
		<url-pattern>/usermanager/userinfo</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>UserProviderServlet</servlet-name>
		<url-pattern>/usermanager/provider</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DBDiagram</servlet-name>
		<url-pattern>/diagram/dbdiagram</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DBEntryServlet</servlet-name>
		<url-pattern>/diagram/dbentry</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ObjectTreeServlet</servlet-name>
		<url-pattern>/objectdesigner/tree</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>CodeAssist</servlet-name>
		<url-pattern>/objectdesigner/codeassist</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>SQLServlet</servlet-name>
		<url-pattern>/objectdesigner/sql</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ObjectFormServlet</servlet-name>
		<url-pattern>/objectdesigner/form</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ComboBoxTemplateServlet</servlet-name>
		<url-pattern>/objectdesigner/comboboxtemplate</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ObjectReportServlet</servlet-name>
		<url-pattern>/objectdesigner/report</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>PortalGroupServlet</servlet-name>
		<url-pattern>/portal/group</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>PortalRightServlet</servlet-name>
		<url-pattern>/portal/right</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>PortalItemServlet</servlet-name>
		<url-pattern>/portal/item</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DataServlet</servlet-name>
		<url-pattern>/client/dataservice</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>UniqueIDServlet</servlet-name>
		<url-pattern>/client/uniqueid</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ExcelServlet</servlet-name>
		<url-pattern>/client/excelservlet</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>WebParams</servlet-name>
		<url-pattern>/config/webparams</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>AttachmentServlet</servlet-name>
		<url-pattern>/client/attachment</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ObjectWorkFlowServlet</servlet-name>
		<url-pattern>/objectdesigner/workflow</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>PictureServlet</servlet-name>
		<url-pattern>/client/picture</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>FormsDefineServlet</servlet-name>
		<url-pattern>/client/formsdefine</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>GridDefineServlet</servlet-name>
		<url-pattern>/client/griddefine</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>WorkFlowRuntimeServlet</servlet-name>
		<url-pattern>/client/workflow</url-pattern>
	</servlet-mapping>

	<!-- 消息处理配置 -->
	<servlet>
		<servlet-name>MessageServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.message.MessageServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>CalendarServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.utils.CalendarServlet</servlet-class>
	</servlet>


	<servlet-mapping>
		<servlet-name>MessageServlet</servlet-name>
		<url-pattern>/client/message</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>CalendarServlet</servlet-name>
		<url-pattern>/client/calendar</url-pattern>
	</servlet-mapping>
	<servlet>
		<servlet-name>ListOrTreeDataSetServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webclient.ListOrTreeDataSetServlet</servlet-class>
	</servlet>
	<servlet-mapping>
		<servlet-name>ListOrTreeDataSetServlet</servlet-name>
		<url-pattern>/client/listortreedataset</url-pattern>
	</servlet-mapping>


	<!--[验证码 -->
	<servlet>
		<servlet-name>ObjectQueryServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.design.objects.ObjectQueryServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>QueryServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webclient.QueryServlet</servlet-class>
	</servlet>
	<servlet-mapping>
		<servlet-name>ObjectQueryServlet</servlet-name>
		<url-pattern>/objectdesigner/query</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>QueryServlet</servlet-name>
		<url-pattern>/client/queryservlet</url-pattern>
	</servlet-mapping>
	<!--验证码] -->


	<!-- 配置监控信息结束 -->
	<session-config>
		<session-timeout>14400</session-timeout>
	</session-config>
	<mime-mapping>
		<extension>swz</extension>
		<mime-type>application/x-shockwave-flash</mime-type>
	</mime-mapping>
	<welcome-file-list>
		<welcome-file>index.jsp</welcome-file>
		<welcome-file>index.html</welcome-file>
		<welcome-file>index.htm</welcome-file>
	</welcome-file-list>



	<login-config>
		<auth-method>BASIC</auth-method>
	</login-config>

	<!-- HttpFlexSession -->
	<listener>
		<listener-class>flex.messaging.HttpFlexSession</listener-class>
	</listener>

	<!-- MessageBroker Servlet -->
	<servlet>
		<servlet-name>MessageBrokerServlet</servlet-name>
		<servlet-class>flex.messaging.MessageBrokerServlet</servlet-class>
		<init-param>
			<param-name>services.configuration.file</param-name>
			<param-value>/WEB-INF/flex/services-config.xml</param-value>
		</init-param>
		<load-on-startup>2</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>GisUtilsServlet</servlet-name>
		<servlet-class>com.estudio.web.gis.GisUtilsServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>HttpProxyServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webgis.HttpProxyServlet</servlet-class>
	</servlet>




	<servlet-mapping>
		<servlet-name>MessageBrokerServlet</servlet-name>
		<url-pattern>/messagebroker/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>GisUtilsServlet</servlet-name>
		<url-pattern>/gis/utils</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>HttpProxyServlet</servlet-name>
		<url-pattern>/webgis/proxy/*</url-pattern>
	</servlet-mapping>

	<filter-mapping>
		<filter-name>DisabledAccessFilter</filter-name>
		<url-pattern>/config/*</url-pattern>
	</filter-mapping>


	<resource-ref>
		<description>ConnectionFactory</description>
		<res-ref-name>jms/ConnectionFactory</res-ref-name>
		<res-type>org.apache.activemq.ActiveMQConnectionFactory</res-type>
		<res-auth>Container</res-auth>
	</resource-ref>

	<resource-ref>
		<description>topic/blazeds</description>
		<res-ref-name>jms/topic/blazeds</res-ref-name>
		<res-type>org.apache.activemq.command.ActiveMQTopic</res-type>
		<res-auth>Container</res-auth>
	</resource-ref>

	<resource-ref>
		<description>queue/blazeds</description>
		<res-ref-name>jms/queue/blazeds</res-ref-name>
		<res-type>org.apache.activemq.command.ActiveMQQueue</res-type>
		<res-auth>Container</res-auth>
	</resource-ref>


	<servlet>
		<servlet-name>MyDesktopServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.webclient.MyDesktopServlet</servlet-class>
	</servlet>
	<servlet-mapping>
		<servlet-name>MyDesktopServlet</servlet-name>
		<url-pattern>/client/MyDesktopServlet</url-pattern>
	</servlet-mapping>
	<servlet>
		<servlet-name>QuestionServlet</servlet-name>
		<servlet-class>com.estudio.web.servlet.QuestionServlet</servlet-class>
	</servlet>
	<servlet-mapping>
		<servlet-name>QuestionServlet</servlet-name>
		<url-pattern>/servlet/question</url-pattern>
	</servlet-mapping>


	<!-- CKFind配置区域 -->
	<servlet>
		<servlet-name>ConnectorServlet</servlet-name>
		<servlet-class>com.ckfinder.connector.ConnectorServlet</servlet-class>
		<init-param>
			<param-name>XMLConfig</param-name>
			<param-value>/WEB-INF/ckfind_config.xml</param-value>
		</init-param>
		<init-param>
			<param-name>debug</param-name>
			<param-value>false</param-value>
		</init-param>
		<load-on-startup>5</load-on-startup>
	</servlet>
	<servlet-mapping>
		<servlet-name>ConnectorServlet</servlet-name>
		<url-pattern>
			/htmlEditor/ckfinder/core/connector/java/connector.java
		</url-pattern>
	</servlet-mapping>
	<filter>
		<filter-name>FileUploadFilter</filter-name>
		<filter-class>com.ckfinder.connector.FileUploadFilter</filter-class>
		<init-param>
			<param-name>sessionCookieName</param-name>
			<param-value>JSESSIONID</param-value>
		</init-param>
		<init-param>
			<param-name>sessionParameterName</param-name>
			<param-value>jsessionid</param-value>
		</init-param>
	</filter>
	<filter-mapping>
		<filter-name>FileUploadFilter</filter-name>
		<url-pattern>
			/htmlEditor/ckfinder/core/connector/java/connector.java
     	 </url-pattern>
	</filter-mapping>

	<filter>
		<filter-name>DruidWebStatFilter</filter-name>
		<filter-class>com.alibaba.druid.support.http.WebStatFilter</filter-class>
		<init-param>
			<param-name>exclusions</param-name>
			<param-value>*.js,*.gif,*.jpg,*.png,*.css,*.ico,*.swf,/db-monitor/*</param-value>
		</init-param>
	</filter>

	<filter-mapping>
		<filter-name>DruidWebStatFilter</filter-name>
		<url-pattern>/client/*</url-pattern>
		<url-pattern>/flexclient/index.jsp</url-pattern>
		<url-pattern>/WebGIS/index.jsp</url-pattern>
	</filter-mapping>

	<servlet>
		<servlet-name>DruidStatViewServlet</servlet-name>
		<servlet-class>com.alibaba.druid.support.http.StatViewServlet</servlet-class>
	</servlet>
  <servlet>
    <servlet-name>DesignUtilsServlet</servlet-name>
    <servlet-class>com.estudio.web.servlet.design.utils.DesignUtilsServlet</servlet-class>
  </servlet>
  <servlet>
    <description>图片服务</description>
    <servlet-name>WebGISPictureService</servlet-name>
    <servlet-class>com.estudio.gis.WebGISPictureService</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>DiagramServlet</servlet-name>
    <servlet-class>com.estudio.web.servlet.webclient.DiagramServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>AttachmentExServlet</servlet-name>
    <servlet-class>com.estudio.web.servlet.webclient.AttachmentExServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>GeometryService</servlet-name>
    <servlet-class>com.estudio.web.gis.GeometryService</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>DciDataManageServlet</servlet-name>
    <servlet-class>com.estudio.web.servlet.external.DciDataManageServlet</servlet-class>
  </servlet>
  
  <servlet-mapping>
    <servlet-name>DciDataManageServlet</servlet-name>
    <url-pattern>/DciDataManage</url-pattern>
  </servlet-mapping>	

	<servlet-mapping>
		<servlet-name>DruidStatViewServlet</servlet-name>
		<url-pattern>/db-monitor/*</url-pattern>
	</servlet-mapping>
  <servlet-mapping>
    <servlet-name>DesignUtilsServlet</servlet-name>
    <url-pattern>/objectdesigner/designutils</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>WebGISPictureService</servlet-name>
    <url-pattern>/webgis/pictureService</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>DiagramServlet</servlet-name>
    <url-pattern>/client/diagram</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>AttachmentExServlet</servlet-name>
    <url-pattern>/client/attachment_ex</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>GeometryService</servlet-name>
    <url-pattern>/webgis/GeometryService</url-pattern>
  </servlet-mapping>
  
    <filter>
        <filter-name>MonitorAuthenFilter</filter-name>
        <filter-class>com.estudio.web.filter.MonitorAuthenFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>MonitorAuthenFilter</filter-name>
        <url-pattern>/db-monitor/*</url-pattern>
    </filter-mapping>
    
   <!-- 
    <filter>
        <filter-name>SimplePageCachingFilter</filter-name>
        <filter-class>net.sf.ehcache.constructs.web.filter.SimplePageCachingFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>SimplePageCachingFilter</filter-name>
        <url-pattern>/images/*</url-pattern>
        <url-pattern>/flexclient/flash/*</url-pattern>
    </filter-mapping>
     -->
    

</web-app>
